---
- name: add bash_profile file
  become: true
  become_user: vagrant
  template:
    src: bash_profile
    dest: ~/.bash_profile

- name: add bashrc file
  become: true
  become_user: vagrant
  template:
    src: bashrc
    dest: ~/.bashrc
  changed_when: false

- name: insert custom bash scripts
  become: true
  become_user: vagrant
  lineinfile:
    path: ~/.bashrc
    line: '{{ item }}'
    insertafter: 'EOF'
  with_items: "{{ bash | default([]) }}"
  changed_when: false

- name: insert custom mount bind into .bashrc for Windows-backed guest VMs
  become: true
  become_user: vagrant
  blockinfile:
    path: ~/.bashrc
    insertafter: 'EOF'
    state: present
    block: |
      alias vendormount='sudo mount --bind ~/vendor /bacpac/vendor'
      alias vendorunmount='sudo umount ~/vendor'
  when: windowshost == true
